<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Website Health Checker</title>
    <link rel="stylesheet" href="./css/popup.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header>
        <div class="app-title">
          <h1>Website Health Checker</h1>
          <span class="version-badge" id="version">v3.2.0</span>
        </div>
        <div class="toggle-container">
          <label class="toggle">
            <input type="checkbox" id="corsButton" />
            <span class="toggle-slider"></span>
          </label>
          <span class="toggle-label">CORS</span>
        </div>
      </header>

      <!-- Analysis section -->
      <section class="analysis-section">
        <div class="tabs">
          <button class="tab-btn active" data-tab="single">
            Analyse de page
          </button>
          <button class="tab-btn" data-tab="multi">Analyse multi-pages</button>
          <button class="tab-btn" data-tab="scanner">
            <span class="icon">🕷️</span>
            Web Scanner
          </button>
        </div>

        <!-- Single page analysis panel -->
        <div class="tab-panel active" id="single-tab">
          <p class="info-text">Analyser la page web courante</p>
          <button type="button" class="btn primary-btn" id="currentPageBtn">
            <span class="icon">📊</span> Analyser cette page
          </button>
        </div>

        <!-- Multi-page analysis panel -->
        <div class="tab-panel" id="multi-tab">
          <div class="input-group">
            <div class="radio-group">
              <label class="radio-label">
                <input
                  type="radio"
                  name="analysisType"
                  value="sitemap"
                  checked
                />
                <span>Sitemap XML</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="analysisType" value="urlList" />
                <span>Liste d'URLs</span>
              </label>
            </div>

            <div id="sitemapInput" class="input-wrapper">
              <input
                type="text"
                id="sitemapUrlInput"
                placeholder="URL du sitemap.xml (ex: https://example.com/sitemap.xml)"
              />
            </div>

            <div id="urlListInput" class="input-wrapper" style="display: none">
              <textarea
                id="urlListTextarea"
                placeholder="Liste d'URLs séparées par des virgules&#10;ex: https://example.com/page1,&#10;https://example.com/page2"
              ></textarea>
            </div>

            <button type="button" class="btn primary-btn" id="analyserBtn">
              <span class="icon">🔍</span> Analyser
            </button>
          </div>
        </div>
        <div class="tab-panel" id="scanner-tab">
          <div class="input-group">
            <div class="input-wrapper">
              <input
                type="url"
                id="scannerDomain"
                placeholder="Domaine à analyser (ex: https://example.com)"
              />
            </div>

            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="scannerMode" value="text" checked />
                <span>Texte visible</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="scannerMode" value="dom" />
                <span>DOM complet</span>
              </label>
            </div>

            <div class="input-wrapper">
              <input
                type="text"
                id="scannerQuery"
                placeholder="Recherche ou expression régulière"
              />
            </div>

            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="scannerUseRegex" />
                <span>Expression régulière</span>
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="scannerCaseSensitive" />
                <span>Sensible à la casse</span>
              </label>
            </div>

            <!-- NOUVEAU : Option de comportement du popup -->
            <div class="behavior-options">
              <label class="behavior-title">Comportement du popup :</label>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="popupBehavior" value="keep-open" checked />
                  <span>Garder ouvert pendant l'analyse</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="popupBehavior" value="close-and-follow" />
                  <span>Fermer et suivre dans la page de résultats</span>
                </label>
              </div>
            </div>

            <!-- Status panel (hidden by default) -->
            <div id="scannerStatus" class="scanner-status hidden">
              <div class="status-info">
                <span id="scannerStatusMessage">Initialisation...</span>
                <button id="scannerStopBtn" class="btn-stop">Arrêter</button>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="scannerProgressBar"></div>
              </div>
              <div class="progress-text" id="scannerProgressText">0%</div>
            </div>

            <div class="button-group">
              <button type="button" class="btn primary-btn" id="startScannerBtn">
                <span class="icon">🕷️</span> Lancer l'analyse
              </button>
              <button type="button" class="btn secondary-btn" id="viewScannerResultsBtn" disabled>
                <span class="icon">📊</span> Résultats
              </button>
            </div>
          </div>
        </div>
        </div>
      </section>

      <!-- Tools section -->
      <section class="tools-section">
        <div class="tools-grid">
          <button id="metaAnalyzer" class="tool-btn" title="Analyse Meta Tags">
            <span class="tool-icon">📊</span>
            <span class="tool-name">Metas</span>
          </button>
          <button id="sitemapWP" class="tool-btn" title="Sitemap du site WP">
            <span class="tool-icon">🗺️</span>
            <span class="tool-name">Sitemap WP</span>
          </button>

          <button id="linksDuda" class="tool-btn" title="Liste des liens Duda">
            <span class="tool-icon">🗺️</span>
            <span class="tool-name">Pages Duda</span>
          </button>
          <button
            id="semanticLinks"
            class="tool-btn"
            title="Vérifier la pertinence des ancres de lien"
          >
            <span class="tool-icon">🔗</span>
            <span class="tool-name">Cohérence des Liens</span>
          </button>

          <button
            id="openHnValidity"
            class="tool-btn"
            title="Vérifier la structure des Hn"
          >
            <span class="tool-icon">📑</span>
            <span class="tool-name">Hn</span>
          </button>
          <button
            id="ratioImg"
            class="tool-btn"
            title="Vérifier le ratio des images"
          >
            <span class="tool-icon">🖼️</span>
            <span class="tool-name">Ratio</span>
          </button>
          <button
            id="openGoogleSchemaValidator"
            class="tool-btn"
            title="Validation Schema"
          >
            <span class="tool-icon">🌐</span>
            <span class="tool-name">Schema</span>
          </button>

          <button
            id="downloadMediaWP"
            class="tool-btn"
            title="Télécharger médias WP"
          >
            <span class="tool-icon">📥</span>
            <span class="tool-name">Médias</span>
          </button>

          <button id="designModeToggle" class="tool-btn" title="Mode édition">
            <span class="tool-icon">✏️</span>
            <span class="tool-name">Édition</span>
          </button>

          <button
            id="copyExpressionsSoprod"
            class="tool-btn"
            title="Copier expressions Soprod"
          >
            <span class="tool-icon">📋</span>
            <span class="tool-name">Soprod</span>
          </button>

          <button id="wordsCloud" class="tool-btn" title="Nuage de mots">
            <span class="tool-icon">☁️</span>
            <span class="tool-name">Mots</span>
          </button>

          <button
            id="diagnosticCORS"
            class="tool-btn"
            title="Diagnostic et réparation CORS"
          >
            <span class="tool-icon">🛡️</span>
            <span class="tool-name">CORS</span>
          </button>
        </div>
      </section>

      <!-- Info section -->
      <footer>
        <p class="console-info">
          <span class="icon">⚠️</span> Ouvrez la console (F12) pour voir les
          résultats détaillés
        </p>
        <a
          href="https://github.com/artkabis/dataCherckerWebTools"
          class="github-link"
          target="_blank"
          title="Dépôt GitHub"
        >
          <span class="github-icon">🐙</span>
        </a>
      </footer>
    </div>

    <script src="./assets/jquery-3.6.4.min.js"></script>
    <script type="module" src="./popup.js"></script>
  </body>
</html>
